{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport history from \"../../history\";\nimport { useState, useEffect } from \"react\";\nimport Axios from \"axios\";\nexport default function useAuth() {\n  _s();\n\n  const axios = Axios.get(\"http://localhost:3001/agen_get\");\n  const [loading, setLoading] = useState(true);\n\n  function logout() {\n    localStorage.removeItem('token');\n    history.push('/login');\n  }\n\n  let navigate = useNavigate();\n\n  function callRegister() {\n    if (localStorage.getItem('token')) {\n      navigate(\"/\", {\n        replace: true\n      });\n    } else {\n      navigate(\"/register\", {\n        replace: true\n      });\n    }\n  }\n\n  function handleClickLogin(values) {\n    Axios.post(\"http://localhost:3001/login\", {\n      email: values.email,\n      password: values.password\n    }).then(response => {\n      console.log(response);\n\n      if (response.data.token) {\n        localStorage.setItem('token', response.data.token);\n      }\n\n      setLoading(true);\n    });\n    navigate(\"/\", {\n      replace: true\n    });\n  }\n\n  ;\n  useEffect(() => {\n    setLoading(false);\n  }, []);\n\n  function handleClickNewRegister(values) {\n    const token = localStorage.getItem('token');\n    Axios.post(\"http://localhost:3001/reg_agenda\", {\n      compromisso: values.compromisso,\n      informacoes: values.informacoes,\n      date: values.date,\n      token: token\n    }).then(response => {\n      console.log(response);\n      setLoading(true);\n    });\n    navigate(\"/agenda\", {\n      replace: true\n    });\n  }\n\n  const handleClickCadastro = values => {\n    Axios.post(\"http://localhost:3001/register\", {\n      email: values.email,\n      password: values.password\n    }).then(response => {\n      console.log(response);\n      navigate(\"/\", {\n        replace: true\n      });\n    });\n  };\n\n  return {\n    logout,\n    handleClickLogin,\n    loading,\n    callRegister,\n    handleClickNewRegister,\n    axios,\n    handleClickCadastro\n  };\n}\n\n_s(useAuth, \"y3JVj3H+DZT4skK8GcW7cVdM7zQ=\", false, function () {\n  return [useNavigate];\n});","map":{"version":3,"names":["React","Link","useNavigate","history","useState","useEffect","Axios","useAuth","axios","get","loading","setLoading","logout","localStorage","removeItem","push","navigate","callRegister","getItem","replace","handleClickLogin","values","post","email","password","then","response","console","log","data","token","setItem","handleClickNewRegister","compromisso","informacoes","date","handleClickCadastro"],"sources":["D:/PROGRAMACAO/node/teste/teste/client/src/context/hooks/useAuth.js"],"sourcesContent":["import React from \"react\";\r\nimport {Link, useNavigate} from \"react-router-dom\";\r\nimport history from \"../../history\";\r\nimport { useState, useEffect } from \"react\";\r\nimport Axios from \"axios\";\r\n\r\n\r\n\r\nexport default function useAuth() {\r\n    const axios = Axios.get(\"http://localhost:3001/agen_get\");\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    function logout() {\r\n        localStorage.removeItem('token');\r\n        history.push('/login');\r\n    }\r\n    let navigate  = useNavigate();\r\n    \r\n    function callRegister() {\r\n        \r\n        if(localStorage.getItem('token')){\r\n            navigate(\"/\", { replace: true });\r\n        }else{\r\n            navigate(\"/register\", { replace: true });\r\n        }\r\n        \r\n    }\r\n\r\n    function handleClickLogin(values) {\r\n        Axios.post(\"http://localhost:3001/login\", {\r\n            email: values.email,\r\n            password: values.password,\r\n        }).then((response) => {\r\n            console.log(response);\r\n            if(response.data.token){\r\n                localStorage.setItem('token', response.data.token);\r\n            }\r\n            \r\n            setLoading(true);\r\n        });\r\n        navigate(\"/\", { replace: true });\r\n    };\r\n    useEffect(() => {\r\n        setLoading(false);\r\n    }, []);\r\n\r\n    function handleClickNewRegister(values) {\r\n        const token = localStorage.getItem('token')\r\n        Axios.post(\"http://localhost:3001/reg_agenda\", {\r\n            compromisso: values.compromisso,\r\n            informacoes: values.informacoes,\r\n            date: values.date,\r\n            token: token,    \r\n                        \r\n        }).then((response) => {\r\n            console.log(response);\r\n            setLoading(true);\r\n        });\r\n        navigate(\"/agenda\", { replace: true });\r\n    }\r\n\r\n    const handleClickCadastro = (values) => {\r\n        Axios.post(\"http://localhost:3001/register\", {\r\n            email: values.email,\r\n            password: values.password,\r\n        }).then((response) => {\r\n            console.log(response);\r\n            navigate(\"/\", { replace: true });\r\n        });\r\n    };\r\n\r\n    return {logout , handleClickLogin, loading, callRegister, handleClickNewRegister, axios, handleClickCadastro};\r\n    \r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}